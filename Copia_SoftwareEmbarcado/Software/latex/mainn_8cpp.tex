\doxysection{/home/felipe/\+C\+Lion\+Projects/\+F\+A\+N/mainn.cpp File Reference}
\label{mainn_8cpp}\index{/home/felipe/CLionProjects/FAN/mainn.cpp@{/home/felipe/CLionProjects/FAN/mainn.cpp}}
{\ttfamily \#include \char`\"{}Remy\+H\+V\+H250.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ N\+U\+M\+\_\+\+M\+SG}~4
\item 
\#define \textbf{ M\+A\+X\+L\+I\+NE}~50
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \textbf{ json} = nlohmann\+::json
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \textbf{ main} ()
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\label{mainn_8cpp_a3e937c42922f7601edb17b747602c471}} 
\index{mainn.cpp@{mainn.cpp}!MAXLINE@{MAXLINE}}
\index{MAXLINE@{MAXLINE}!mainn.cpp@{mainn.cpp}}
\doxysubsubsection{MAXLINE}
{\footnotesize\ttfamily \#define M\+A\+X\+L\+I\+NE~50}

\mbox{\label{mainn_8cpp_accaecfff6769aa8ea7c1707cbaffeed4}} 
\index{mainn.cpp@{mainn.cpp}!NUM\_MSG@{NUM\_MSG}}
\index{NUM\_MSG@{NUM\_MSG}!mainn.cpp@{mainn.cpp}}
\doxysubsubsection{NUM\_MSG}
{\footnotesize\ttfamily \#define N\+U\+M\+\_\+\+M\+SG~4}



\doxysubsection{Typedef Documentation}
\mbox{\label{mainn_8cpp_ab701e3ac61a85b337ec5c1abaad6742d}} 
\index{mainn.cpp@{mainn.cpp}!json@{json}}
\index{json@{json}!mainn.cpp@{mainn.cpp}}
\doxysubsubsection{json}
{\footnotesize\ttfamily using \textbf{ json} =  nlohmann\+::json}



\doxysubsection{Function Documentation}
\mbox{\label{mainn_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{mainn.cpp@{mainn.cpp}!main@{main}}
\index{main@{main}!mainn.cpp@{mainn.cpp}}
\doxysubsubsection{main()}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

C\+AN configuration

Inicialização e Configuração do Pacote por J\+S\+ON
\begin{DoxyCode}{0}
\DoxyCodeLine{39           \{}
\DoxyCodeLine{40     printf(\textcolor{stringliteral}{"Iniciando.. \(\backslash\)n"});}
\DoxyCodeLine{41     \textcolor{keywordtype}{float} SpeedPretendida;}
\DoxyCodeLine{42     \textcolor{keywordtype}{float} TorquePretendido;}
\DoxyCodeLine{43     \textcolor{keywordtype}{float} TorqueLimit;}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keywordtype}{char} TempoEmString[10];}
\DoxyCodeLine{46 }
\DoxyCodeLine{47     \textcolor{comment}{//clock\_t GuardaIntervaloTempo;}}
\DoxyCodeLine{48     \textcolor{comment}{//clock\_t Temporaria;}}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{comment}{//FILE* Arquivo;}}
\DoxyCodeLine{51     \textcolor{comment}{//Arquivo = fopen("log.txt", "a");}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 }
\DoxyCodeLine{54     TorqueTimerInfo ObjTorqueTimerInfo;}
\DoxyCodeLine{55     MotorPosInfo ObjMotorPosInfo;}
\DoxyCodeLine{56     Temperature1 ObjTemperature1;}
\DoxyCodeLine{57     Temperature2 ObjTemperature2;}
\DoxyCodeLine{58     Temperature3 ObjTemperature3;}
\DoxyCodeLine{59     CurrentInformation ObjCurrentInformation;}
\DoxyCodeLine{60     VoltageInformation ObjVoltageInformation;}
\DoxyCodeLine{61     FluxInformation ObjFluxInformation;}
\DoxyCodeLine{62     InternalVoltages ObjInternalVoltages;}
\DoxyCodeLine{63     AnalogInputVoltages ObjAnalogInputVoltages;}
\DoxyCodeLine{64     ModulationIndex\_FluxWeakening ObjModulationIndex\_FluxWeakening;}
\DoxyCodeLine{65     CommandMessage ObjCommandMessage;}
\DoxyCodeLine{66     InternalStates ObjInternalStates;}
\DoxyCodeLine{67 }
\DoxyCodeLine{68 }
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{keywordtype}{int} SocketCan = socket(PF\_CAN, SOCK\_RAW, CAN\_RAW);}
\DoxyCodeLine{71     \textcolor{keyword}{struct }sockaddr\_can addr;}
\DoxyCodeLine{72     \textcolor{keyword}{struct }ifreq ifr;}
\DoxyCodeLine{73     strcpy(ifr.ifr\_name, \textcolor{stringliteral}{"can1"});}
\DoxyCodeLine{74     ioctl(SocketCan, SIOCGIFINDEX, \&ifr);}
\DoxyCodeLine{75     addr.can\_family = AF\_CAN;}
\DoxyCodeLine{76     addr.can\_ifindex = ifr.ifr\_ifindex;}
\DoxyCodeLine{77     bind(SocketCan, (\textcolor{keyword}{struct} sockaddr *) \&addr, \textcolor{keyword}{sizeof}(addr));}
\DoxyCodeLine{78     \textcolor{keyword}{struct }can\_frame frameRead, frameWrite; \textcolor{comment}{//Criação dos frames}}
\DoxyCodeLine{79     \textcolor{keyword}{struct }can\_frame frameWrite\_Reserva, frameWrite\_Titular;}
\DoxyCodeLine{80     frameRead.can\_dlc = 8;}
\DoxyCodeLine{81     frameWrite.can\_dlc = 8;}
\DoxyCodeLine{82 }
\DoxyCodeLine{83 }
\DoxyCodeLine{88     \textcolor{keywordtype}{int} sockfd;}
\DoxyCodeLine{89     \textcolor{keywordtype}{char} MsgToClient[400];}
\DoxyCodeLine{90     \textcolor{keyword}{struct }sockaddr\_in servaddr, cliaddr;}
\DoxyCodeLine{91 }
\DoxyCodeLine{92 }
\DoxyCodeLine{93 }
\DoxyCodeLine{94     \textcolor{comment}{// Creating socket file descriptor}}
\DoxyCodeLine{95     \textcolor{keywordflow}{if} ( (sockfd = socket(AF\_INET, SOCK\_DGRAM, 0)) < 0 ) \{}
\DoxyCodeLine{96         perror(\textcolor{stringliteral}{"socket creation failed"});}
\DoxyCodeLine{97         exit(EXIT\_FAILURE);}
\DoxyCodeLine{98     \}}
\DoxyCodeLine{99     memset(\&servaddr, 0, \textcolor{keyword}{sizeof}(servaddr));}
\DoxyCodeLine{100     memset(\&cliaddr, 0, \textcolor{keyword}{sizeof}(cliaddr));}
\DoxyCodeLine{101 }
\DoxyCodeLine{102     \textcolor{comment}{// Filling server information}}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     servaddr.sin\_family = AF\_INET; \textcolor{comment}{// IPv4}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106     inet\_aton(\textcolor{stringliteral}{"127.0.0.1"} , \&servaddr.sin\_addr);}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     servaddr.sin\_addr.s\_addr = INADDR\_ANY;}
\DoxyCodeLine{109     servaddr.sin\_port = htons(8080);}
\DoxyCodeLine{110 }
\DoxyCodeLine{111 }
\DoxyCodeLine{112 }
\DoxyCodeLine{113     \textcolor{comment}{/* Set address automatically if desired */}}
\DoxyCodeLine{114     \textcolor{comment}{//if (argc == 2)}}
\DoxyCodeLine{115     \textcolor{comment}{//\{}}
\DoxyCodeLine{116 }
\DoxyCodeLine{117     \textcolor{comment}{/* Get host name of this computer */}}
\DoxyCodeLine{118     \textcolor{comment}{//gethostname(host\_name, sizeof(host\_name));}}
\DoxyCodeLine{119     \textcolor{comment}{//hp = gethostbyname(host\_name);}}
\DoxyCodeLine{120 }
\DoxyCodeLine{121     \textcolor{comment}{/* Check for NULL pointer */}}
\DoxyCodeLine{122     \textcolor{comment}{//if (hp == NULL)}}
\DoxyCodeLine{123     \textcolor{comment}{//\{}}
\DoxyCodeLine{124     \textcolor{comment}{//    fprintf(stderr, "Could not get host name.\(\backslash\)n");}}
\DoxyCodeLine{125     \textcolor{comment}{//    closesocket(sd);}}
\DoxyCodeLine{126     \textcolor{comment}{//    WSACleanup();}}
\DoxyCodeLine{127     \textcolor{comment}{//    exit(0);}}
\DoxyCodeLine{128     \textcolor{comment}{//\}}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \textcolor{comment}{/* Assign the address */}}
\DoxyCodeLine{131     \textcolor{comment}{//server.sin\_addr.S\_un.S\_un\_b.s\_b1 = hp-\/>h\_addr\_list[0][0];}}
\DoxyCodeLine{132     \textcolor{comment}{//server.sin\_addr.S\_un.S\_un\_b.s\_b2 = hp-\/>h\_addr\_list[0][1];}}
\DoxyCodeLine{133     \textcolor{comment}{//server.sin\_addr.S\_un.S\_un\_b.s\_b3 = hp-\/>h\_addr\_list[0][2];}}
\DoxyCodeLine{134     \textcolor{comment}{//server.sin\_addr.S\_un.S\_un\_b.s\_b4 = hp-\/>h\_addr\_list[0][3];}}
\DoxyCodeLine{135     \textcolor{comment}{//\}}}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \textcolor{comment}{/* Otherwise assign it manually */}}
\DoxyCodeLine{138     \textcolor{comment}{//else}}
\DoxyCodeLine{139     \textcolor{comment}{//\{}}
\DoxyCodeLine{140     \textcolor{comment}{//   server.sin\_addr.S\_un.S\_un\_b.s\_b1 = (unsigned char)a1;}}
\DoxyCodeLine{141     \textcolor{comment}{//    server.sin\_addr.S\_un.S\_un\_b.s\_b2 = (unsigned char)a2;}}
\DoxyCodeLine{142     \textcolor{comment}{//    server.sin\_addr.S\_un.S\_un\_b.s\_b3 = (unsigned char)a3;}}
\DoxyCodeLine{143     \textcolor{comment}{//    server.sin\_addr.S\_un.S\_un\_b.s\_b4 = (unsigned char)a4;}}
\DoxyCodeLine{144     \textcolor{comment}{//\}}}
\DoxyCodeLine{145 }
\DoxyCodeLine{146 }
\DoxyCodeLine{147     \textcolor{comment}{//Bind the socket with the server address}}
\DoxyCodeLine{148     \textcolor{keywordflow}{if} ( bind(sockfd, (\textcolor{keyword}{const} \textcolor{keyword}{struct} sockaddr *)\&servaddr,}
\DoxyCodeLine{149             \textcolor{keyword}{sizeof}(servaddr)) < 0 )}
\DoxyCodeLine{150     \{}
\DoxyCodeLine{151         perror(\textcolor{stringliteral}{"bind failed"});}
\DoxyCodeLine{152         exit(EXIT\_FAILURE);}
\DoxyCodeLine{153     \}}
\DoxyCodeLine{154     socklen\_t len;}
\DoxyCodeLine{155     len = \textcolor{keyword}{sizeof}(cliaddr); \textcolor{comment}{//len is value/result}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157 }
\DoxyCodeLine{163     json UDP\_Package;}
\DoxyCodeLine{164 }
\DoxyCodeLine{165     UDP\_Package[\textcolor{stringliteral}{"ID"}]                           = \textcolor{stringliteral}{"X"};}
\DoxyCodeLine{166     UDP\_Package[\textcolor{stringliteral}{"Angle"}]                        = 0.0;}
\DoxyCodeLine{167     UDP\_Package[\textcolor{stringliteral}{"Speed"}]                        = 0.0;}
\DoxyCodeLine{168     UDP\_Package[\textcolor{stringliteral}{"CommandedTorque"}]              = 0.0;}
\DoxyCodeLine{169     UDP\_Package[\textcolor{stringliteral}{"TorqueFeedback"}]               = 0.0;}
\DoxyCodeLine{170     UDP\_Package[\textcolor{stringliteral}{"TemperatureModuleA"}]           = 0.0;}
\DoxyCodeLine{171     UDP\_Package[\textcolor{stringliteral}{"TemperatureModuleB"}]           = 0.0;}
\DoxyCodeLine{172     UDP\_Package[\textcolor{stringliteral}{"TemperatureModuleC"}]           = 0.0;}
\DoxyCodeLine{173     UDP\_Package[\textcolor{stringliteral}{"TemperatureGateDriverBoard"}]   = 0.0;}
\DoxyCodeLine{174     UDP\_Package[\textcolor{stringliteral}{"ControlBoardTemperature"}]      = 0.0;}
\DoxyCodeLine{175     UDP\_Package[\textcolor{stringliteral}{"RTD1\_Temperature"}]             = 0.0;}
\DoxyCodeLine{176     UDP\_Package[\textcolor{stringliteral}{"RTD2\_Temperature"}]             = 0.0;}
\DoxyCodeLine{177     UDP\_Package[\textcolor{stringliteral}{"RTD3\_Temperature"}]             = 0.0;}
\DoxyCodeLine{178     UDP\_Package[\textcolor{stringliteral}{"RTD4\_Temperature"}]             = 0.0;}
\DoxyCodeLine{179     UDP\_Package[\textcolor{stringliteral}{"MotorTemperature"}]             = 0.0;}
\DoxyCodeLine{180     UDP\_Package[\textcolor{stringliteral}{"Torque\_Shudder"}]               = 0.0;}
\DoxyCodeLine{181     UDP\_Package[\textcolor{stringliteral}{"RTD4\_Temperature"}]             = 0.0;}
\DoxyCodeLine{182     UDP\_Package[\textcolor{stringliteral}{"RTD5\_Temperature"}]             = 0.0;}
\DoxyCodeLine{183     UDP\_Package[\textcolor{stringliteral}{"MotorTemperature"}]             = 0.0;}
\DoxyCodeLine{184     UDP\_Package[\textcolor{stringliteral}{"Torque\_Shudder"}]               = 0.0;}
\DoxyCodeLine{185     UDP\_Package[\textcolor{stringliteral}{"PhaseACurrent"}]                = 0.0;}
\DoxyCodeLine{186     UDP\_Package[\textcolor{stringliteral}{"PhaseBCurrent"}]                = 0.0;}
\DoxyCodeLine{187     UDP\_Package[\textcolor{stringliteral}{"PhaseCCurrent"}]                = 0.0;}
\DoxyCodeLine{188     UDP\_Package[\textcolor{stringliteral}{"DC\_BusCurrent"}]                = 0.0;}
\DoxyCodeLine{189     UDP\_Package[\textcolor{stringliteral}{"DC\_BusVoltage"}]                = 0.0;}
\DoxyCodeLine{190     UDP\_Package[\textcolor{stringliteral}{"OutputVoltage"}]                = 0.0;}
\DoxyCodeLine{191     UDP\_Package[\textcolor{stringliteral}{"VAB\_Vd\_Voltage"}]               = 0.0;}
\DoxyCodeLine{192     UDP\_Package[\textcolor{stringliteral}{"VBC\_Vd\_Voltage"}]               = 0.0;}
\DoxyCodeLine{193     UDP\_Package[\textcolor{stringliteral}{"FluxCommand"}]                  = 0.0;}
\DoxyCodeLine{194     UDP\_Package[\textcolor{stringliteral}{"FluxFeedback"}]                 = 0.0;}
\DoxyCodeLine{195     UDP\_Package[\textcolor{stringliteral}{"IdFeedback"}]                   = 0.0;}
\DoxyCodeLine{196     UDP\_Package[\textcolor{stringliteral}{"IqFeedback"}]                   = 0.0;}
\DoxyCodeLine{197     UDP\_Package[\textcolor{stringliteral}{"VoltageReference1Dot5"}]        = 0.0;}
\DoxyCodeLine{198     UDP\_Package[\textcolor{stringliteral}{"VoltageReference2Dot5"}]        = 0.0;}
\DoxyCodeLine{199     UDP\_Package[\textcolor{stringliteral}{"VoltageReference5Dot0"}]        = 0.0;}
\DoxyCodeLine{200     UDP\_Package[\textcolor{stringliteral}{"VoltageReference12"}]           = 0.0;}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_0"}]                  = 0;}
\DoxyCodeLine{203     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_1"}]                  = 0;}
\DoxyCodeLine{204     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_2"}]                  = 0;}
\DoxyCodeLine{205     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_3"}]                  = 0;}
\DoxyCodeLine{206     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_4"}]                  = 0;}
\DoxyCodeLine{207     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_5"}]                  = 0;}
\DoxyCodeLine{208     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_6"}]                  = 0;}
\DoxyCodeLine{209     UDP\_Package[\textcolor{stringliteral}{"FaultCode\_7"}]                  = 0;}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     \textcolor{comment}{//Recepção de dados pela interface}}
\DoxyCodeLine{212     json UDP\_Interface;}
\DoxyCodeLine{213 }
\DoxyCodeLine{214     UDP\_Interface[\textcolor{stringliteral}{"Parameter\_1"}]    =   0;}
\DoxyCodeLine{215     UDP\_Interface[\textcolor{stringliteral}{"Parameter\_2"}]    =   0;}
\DoxyCodeLine{216     UDP\_Interface[\textcolor{stringliteral}{"Parameter\_3"}]    =   0;}
\DoxyCodeLine{217     UDP\_Interface[\textcolor{stringliteral}{"Parameter\_4"}]    =   0;}
\DoxyCodeLine{218 }
\DoxyCodeLine{219 }
\DoxyCodeLine{220 }
\DoxyCodeLine{221 }
\DoxyCodeLine{222     \textcolor{comment}{//struct can\_frame frameRead, frameWrite; //Criação dos frames}}
\DoxyCodeLine{223     \textcolor{comment}{//frameRead.can\_dlc = 8;}}
\DoxyCodeLine{224 }
\DoxyCodeLine{225 }
\DoxyCodeLine{226 }
\DoxyCodeLine{227     \textcolor{keywordtype}{int} FlagRead = 0;}
\DoxyCodeLine{228     \textcolor{keywordtype}{int} FlagWrite = 0;}
\DoxyCodeLine{229     \textcolor{keywordtype}{int} n = 0;}
\DoxyCodeLine{230     \textcolor{keywordtype}{char} buffer[200];}
\DoxyCodeLine{231     \textcolor{keywordtype}{char} buffer2[100];}
\DoxyCodeLine{232     \textcolor{keywordtype}{char} buffer3[100];}
\DoxyCodeLine{233 }
\DoxyCodeLine{234     \textcolor{keywordtype}{int} contador = 0;}
\DoxyCodeLine{235 }
\DoxyCodeLine{236 }
\DoxyCodeLine{237     \textcolor{keywordtype}{int} MsgCounter = 0;}
\DoxyCodeLine{238     \textcolor{keywordtype}{int} i, j;}
\DoxyCodeLine{239     \textcolor{keywordtype}{int} CounterMotorPosition = 0;}
\DoxyCodeLine{240     \textcolor{keywordtype}{int} CounterTorqueTimerInfo = 0;}
\DoxyCodeLine{241 }
\DoxyCodeLine{242 }
\DoxyCodeLine{243     n = recvfrom(sockfd, (\textcolor{keywordtype}{char} *)buffer, 100,}
\DoxyCodeLine{244     MSG\_WAITALL, ( \textcolor{keyword}{struct} sockaddr *) \&cliaddr,}
\DoxyCodeLine{245     \&len);}
\DoxyCodeLine{246 }
\DoxyCodeLine{247     buffer[n] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{248     printf(\textcolor{stringliteral}{"Client : \%s\(\backslash\)n"}, buffer);}
\DoxyCodeLine{249 }
\DoxyCodeLine{250 }
\DoxyCodeLine{251 }
\DoxyCodeLine{252     strcpy(buffer2, \textcolor{stringliteral}{"Teste para o Qt.."});}
\DoxyCodeLine{253     sendto(sockfd, (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)buffer2, strlen(buffer2),}
\DoxyCodeLine{254     MSG\_CONFIRM, (\textcolor{keyword}{const} \textcolor{keyword}{struct} sockaddr *) \&cliaddr,}
\DoxyCodeLine{255     len);}
\DoxyCodeLine{256 }
\DoxyCodeLine{257     \textcolor{keywordtype}{int} wordCounter = 0;}
\DoxyCodeLine{258 }
\DoxyCodeLine{259     std::ifstream fileCAN(\textcolor{stringliteral}{"listaCAN.txt"});}
\DoxyCodeLine{260     std::string auxstr;}
\DoxyCodeLine{261     \textcolor{keywordtype}{int} matrx[4][9];}
\DoxyCodeLine{262     \textcolor{keywordtype}{int} lin = 0;}
\DoxyCodeLine{263     \textcolor{keywordtype}{int} col = 0;}
\DoxyCodeLine{264 }
\DoxyCodeLine{265     \textcolor{comment}{//Configuração do log}}
\DoxyCodeLine{266     \textcolor{comment}{//auto logger = spdlog::basic\_logger\_mt("logger", "log.txt");}}
\DoxyCodeLine{267     \textcolor{comment}{//logger-\/>info("Arquivo de log de dados do software embarcado");}}
\DoxyCodeLine{268 }
\DoxyCodeLine{269 }
\DoxyCodeLine{270     \textcolor{keywordtype}{int} OpcaoTorqueLimit;}
\DoxyCodeLine{271     \textcolor{keywordtype}{int} AuxiliarInterface;}
\DoxyCodeLine{272     std::mutex valorMtx;}
\DoxyCodeLine{273 }
\DoxyCodeLine{274 }
\DoxyCodeLine{275     lin = 0;}
\DoxyCodeLine{276 }
\DoxyCodeLine{277     \textcolor{keywordtype}{int} hasMessage = 0;}
\DoxyCodeLine{278     \textcolor{comment}{//adicionar o logger}}
\DoxyCodeLine{279 \textcolor{preprocessor}{    \#pragma omp parallel default (none) shared(sockfd, hasMessage, MsgToClient) firstprivate(FlagWrite, ObjCommandMessage, FlagRead, frameWrite, SocketCan, wordCounter, TorqueLimit, buffer3, frameRead, n, buffer, ObjMotorPosInfo, ObjTorqueTimerInfo, ObjTemperature1, ObjTemperature2, ObjTemperature3, ObjInternalStates, ObjCurrentInformation, ObjVoltageInformation, ObjFluxInformation, ObjInternalVoltages, ObjAnalogInputVoltages, ObjModulationIndex\_FluxWeakening, UDP\_Package, contador, len, cliaddr, AuxiliarInterface, frameWrite\_Reserva)}}
\DoxyCodeLine{280     \{}
\DoxyCodeLine{281 \textcolor{preprocessor}{        \#pragma omp sections}}
\DoxyCodeLine{282         \{}
\DoxyCodeLine{283 }
\DoxyCodeLine{284 \textcolor{preprocessor}{            \#pragma omp section //TASK READ SOFTWARE-\/MOTOR}}
\DoxyCodeLine{285 }
\DoxyCodeLine{286             \{}
\DoxyCodeLine{287 }
\DoxyCodeLine{288                 \textcolor{keywordflow}{while} (1)}
\DoxyCodeLine{289                 \{}
\DoxyCodeLine{290 }
\DoxyCodeLine{291                 \textcolor{comment}{//\#pragma omp critical (mutex)}}
\DoxyCodeLine{292                 \textcolor{comment}{//\{}}
\DoxyCodeLine{293                 \textcolor{comment}{//FlagRead = read(SocketCan, \&frameRead, sizeof(struct can\_frame)); // A função read retorna o número de bytes lidos}}
\DoxyCodeLine{294                 \textcolor{comment}{//\}}}
\DoxyCodeLine{295 }
\DoxyCodeLine{296                        frameRead.can\_id = 162;}
\DoxyCodeLine{297                        frameRead.data[0] = 2;}
\DoxyCodeLine{298                        frameRead.data[1] = 1;}
\DoxyCodeLine{299                        frameRead.data[2] = 51;}
\DoxyCodeLine{300                        frameRead.data[3] = 1;}
\DoxyCodeLine{301                        frameRead.data[4] = 2;}
\DoxyCodeLine{302                        frameRead.data[5] = 2;}
\DoxyCodeLine{303                        frameRead.data[6] = 51;}
\DoxyCodeLine{304                        frameRead.data[7] = 2;}
\DoxyCodeLine{305 }
\DoxyCodeLine{306 }
\DoxyCodeLine{307 }
\DoxyCodeLine{308 }
\DoxyCodeLine{309                         \textcolor{comment}{//GuardaIntervaloTempo = clock();}}
\DoxyCodeLine{310                         ObjMotorPosInfo.IfID\_MotorPosInfo(\&frameRead, UDP\_Package);}
\DoxyCodeLine{311 }
\DoxyCodeLine{312                         ObjTorqueTimerInfo.IfID\_TorqueTimerInfo(\&frameRead, UDP\_Package);}
\DoxyCodeLine{313                         ObjTemperature1.IfID\_Temperature1(\&frameRead, UDP\_Package);}
\DoxyCodeLine{314                         ObjTemperature2.IfID\_Temperature2(\&frameRead, UDP\_Package);}
\DoxyCodeLine{315                         ObjTemperature3.IfID\_Temperature3(\&frameRead, UDP\_Package);}
\DoxyCodeLine{316                         ObjInternalStates.IfID\_InternalStates(\&frameRead, UDP\_Package);}
\DoxyCodeLine{317 }
\DoxyCodeLine{318                         \textcolor{comment}{/*}}
\DoxyCodeLine{319 \textcolor{comment}{                        //Desenvolvimento do log (spdlog)}}
\DoxyCodeLine{320 \textcolor{comment}{                        if(frameRead.can\_id == 160)\{}}
\DoxyCodeLine{321 \textcolor{comment}{                            logger-\/>info("ID: TEMPERATURES\_1");}}
\DoxyCodeLine{322 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{323 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjTemperature1.GetByte7(), ObjTemperature1.GetByte6(), ObjTemperature1.GetByte5(), ObjTemperature1.GetByte4(), ObjTemperature1.GetByte3(), ObjTemperature1.GetByte2(), ObjTemperature1.GetByte1(), ObjTemperature1.GetByte0());}}
\DoxyCodeLine{324 \textcolor{comment}{                            logger-\/>info("Module A: \{:f\}", ObjTemperature1.GetModuleAProcessed());}}
\DoxyCodeLine{325 \textcolor{comment}{                            logger-\/>info("Module B: \{:f\}", ObjTemperature1.GetModuleBProcessed());}}
\DoxyCodeLine{326 \textcolor{comment}{                            logger-\/>info("Module C: \{:f\}", ObjTemperature1.GetModuleCProcessed());}}
\DoxyCodeLine{327 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{328 \textcolor{comment}{                        \}}}
\DoxyCodeLine{329 \textcolor{comment}{}}
\DoxyCodeLine{330 \textcolor{comment}{}}
\DoxyCodeLine{331 \textcolor{comment}{                        else if(frameRead.can\_id == 161)\{}}
\DoxyCodeLine{332 \textcolor{comment}{                            logger-\/>info("ID: TEMPERATURES\_2");}}
\DoxyCodeLine{333 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{334 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjTemperature2.GetByte7(), ObjTemperature2.GetByte6(), ObjTemperature2.GetByte5(), ObjTemperature2.GetByte4(), ObjTemperature2.GetByte3(), ObjTemperature2.GetByte2(), ObjTemperature2.GetByte1(), ObjTemperature2.GetByte0());}}
\DoxyCodeLine{335 \textcolor{comment}{                            logger-\/>info("Control Board Temperature: \{:f\}", ObjTemperature2.GetControlBoardTemperatureProcessed());}}
\DoxyCodeLine{336 \textcolor{comment}{                            logger-\/>info("RTD1: \{:f\}", ObjTemperature2.GetRTD1Processed());}}
\DoxyCodeLine{337 \textcolor{comment}{                            logger-\/>info("RTD2: \{:f\}", ObjTemperature2.GetRTD2Processed());}}
\DoxyCodeLine{338 \textcolor{comment}{                            logger-\/>info("RTD3: \{:f\}", ObjTemperature2.GetRTD3Processed());}}
\DoxyCodeLine{339 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{340 \textcolor{comment}{                        \}}}
\DoxyCodeLine{341 \textcolor{comment}{}}
\DoxyCodeLine{342 \textcolor{comment}{                        else if(frameRead.can\_id == 162)\{}}
\DoxyCodeLine{343 \textcolor{comment}{                            logger-\/>info("ID: TEMPERATURES\_3");}}
\DoxyCodeLine{344 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{345 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjTemperature3.GetByte7(), ObjTemperature3.GetByte6(), ObjTemperature3.GetByte5(), ObjTemperature3.GetByte4(), ObjTemperature3.GetByte3(), ObjTemperature3.GetByte2(), ObjTemperature3.GetByte1(), ObjTemperature3.GetByte0());}}
\DoxyCodeLine{346 \textcolor{comment}{                            logger-\/>info("RTD4 Temperature: \{:f\}", ObjTemperature3.GetRTD4\_TemperatureProcessed());}}
\DoxyCodeLine{347 \textcolor{comment}{                            logger-\/>info("RTD5 Temperature: \{:f\}", ObjTemperature3.GetRTD5\_TemperatureProcessed());}}
\DoxyCodeLine{348 \textcolor{comment}{                            logger-\/>info("Motor Temperature: \{:f\}", ObjTemperature3.GetMotorTemperatureProcessed());}}
\DoxyCodeLine{349 \textcolor{comment}{                            logger-\/>info("Torque Shudder: \{:f\}", ObjTemperature3.GetTorqueShudderProcessed());}}
\DoxyCodeLine{350 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{351 \textcolor{comment}{                        \}}}
\DoxyCodeLine{352 \textcolor{comment}{}}
\DoxyCodeLine{353 \textcolor{comment}{                        else if(frameRead.can\_id == 165)\{}}
\DoxyCodeLine{354 \textcolor{comment}{                            logger-\/>info("ID: MOTOR\_POSITION");}}
\DoxyCodeLine{355 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{356 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjMotorPosInfo.GetByte7(), ObjMotorPosInfo.GetByte6(), ObjMotorPosInfo.GetByte5(), ObjMotorPosInfo.GetByte4(), ObjMotorPosInfo.GetByte3(), ObjMotorPosInfo.GetByte2(), ObjMotorPosInfo.GetByte1(), ObjMotorPosInfo.GetByte0());}}
\DoxyCodeLine{357 \textcolor{comment}{                            logger-\/>info("Angle: \{:f\}", ObjMotorPosInfo.GetMotorAngleProcessed());}}
\DoxyCodeLine{358 \textcolor{comment}{                            logger-\/>info("Speed: \{:f\}", ObjMotorPosInfo.GetMotorSpeedProcessed());}}
\DoxyCodeLine{359 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{360 \textcolor{comment}{                        \}}}
\DoxyCodeLine{361 \textcolor{comment}{}}
\DoxyCodeLine{362 \textcolor{comment}{                        else if(frameRead.can\_id == 166)\{}}
\DoxyCodeLine{363 \textcolor{comment}{                            logger-\/>info("ID: CURRENT\_INFORMATION");}}
\DoxyCodeLine{364 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{365 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjCurrentInformation.GetByte7(), ObjCurrentInformation.GetByte6(), ObjCurrentInformation.GetByte5(), ObjCurrentInformation.GetByte4(), ObjCurrentInformation.GetByte3(), ObjCurrentInformation.GetByte2(), ObjCurrentInformation.GetByte1(), ObjCurrentInformation.GetByte0());}}
\DoxyCodeLine{366 \textcolor{comment}{                            logger-\/>info("Phase A Current: \{:f\}", ObjCurrentInformation.GetPhaseACurrentProcessed());}}
\DoxyCodeLine{367 \textcolor{comment}{                            logger-\/>info("Phase B Current: \{:f\}", ObjCurrentInformation.GetPhaseBCurrentProcessed());}}
\DoxyCodeLine{368 \textcolor{comment}{                            logger-\/>info("Phase C Current: \{:f\}", ObjCurrentInformation.GetPhaseCCurrentProcessed());}}
\DoxyCodeLine{369 \textcolor{comment}{                            logger-\/>info("DC Bus Current: \{:f\}", ObjCurrentInformation.GetDCBusCurrentProcessed());}}
\DoxyCodeLine{370 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{371 \textcolor{comment}{                        \}}}
\DoxyCodeLine{372 \textcolor{comment}{}}
\DoxyCodeLine{373 \textcolor{comment}{                        else if(frameRead.can\_id == 167)\{}}
\DoxyCodeLine{374 \textcolor{comment}{                            logger-\/>info("ID: VOLTAGE\_INFORMATION");}}
\DoxyCodeLine{375 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{376 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjVoltageInformation.GetByte7(), ObjVoltageInformation.GetByte6(), ObjVoltageInformation.GetByte5(), ObjVoltageInformation.GetByte4(), ObjVoltageInformation.GetByte3(), ObjVoltageInformation.GetByte2(), ObjVoltageInformation.GetByte1(), ObjVoltageInformation.GetByte0());}}
\DoxyCodeLine{377 \textcolor{comment}{                            logger-\/>info("DC Bus Voltage: \{:f\}", ObjVoltageInformation.GetDCBusVoltageProcessed());}}
\DoxyCodeLine{378 \textcolor{comment}{                            logger-\/>info("Output Voltage: \{:f\}", ObjVoltageInformation.GetOutputVoltageProcessed());}}
\DoxyCodeLine{379 \textcolor{comment}{                            logger-\/>info("VAB Vd Voltage: \{:f\}", ObjVoltageInformation.GetVAB\_Vd\_VoltageProcessed());}}
\DoxyCodeLine{380 \textcolor{comment}{                            logger-\/>info("VBC Vd Voltage: \{:f\}", ObjVoltageInformation.GetVBC\_Vd\_VoltageProcessed());}}
\DoxyCodeLine{381 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{382 \textcolor{comment}{                        \}}}
\DoxyCodeLine{383 \textcolor{comment}{}}
\DoxyCodeLine{384 \textcolor{comment}{                        else if(frameRead.can\_id == 168)\{}}
\DoxyCodeLine{385 \textcolor{comment}{                            logger-\/>info("ID: FLUX\_INFORMATION");}}
\DoxyCodeLine{386 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{387 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjFluxInformation.GetByte7(), ObjFluxInformation.GetByte6(), ObjFluxInformation.GetByte5(), ObjFluxInformation.GetByte4(), ObjVoltageInformation.GetByte3(), ObjFluxInformation.GetByte2(), ObjFluxInformation.GetByte1(), ObjFluxInformation.GetByte0());}}
\DoxyCodeLine{388 \textcolor{comment}{                            logger-\/>info("Flux Command: \{:f\}", ObjFluxInformation.GetFluxCommandProcessed());}}
\DoxyCodeLine{389 \textcolor{comment}{                            logger-\/>info("Flux Feedback: \{:f\}", ObjFluxInformation.GetFluxFeedbackProcessed());}}
\DoxyCodeLine{390 \textcolor{comment}{                            logger-\/>info("Id Feedback: \{:f\}", ObjFluxInformation.GetIdFeedbackProcessed());}}
\DoxyCodeLine{391 \textcolor{comment}{                            logger-\/>info("Iq Feedback: \{:f\}", ObjFluxInformation.GetIqFeedbackProcessed());}}
\DoxyCodeLine{392 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{393 \textcolor{comment}{                        \}}}
\DoxyCodeLine{394 \textcolor{comment}{}}
\DoxyCodeLine{395 \textcolor{comment}{                        else if(frameRead.can\_id == 169)\{}}
\DoxyCodeLine{396 \textcolor{comment}{                            logger-\/>info("ID: INTERNAL\_VOLTAGES");}}
\DoxyCodeLine{397 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{398 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjInternalVoltages.GetByte7(), ObjInternalVoltages.GetByte6(), ObjInternalVoltages.GetByte5(), ObjInternalVoltages.GetByte4(), ObjVoltageInformation.GetByte3(), ObjInternalVoltages.GetByte2(), ObjInternalVoltages.GetByte1(), ObjInternalVoltages.GetByte0());}}
\DoxyCodeLine{399 \textcolor{comment}{                            logger-\/>info("Voltage Reference 1.5: \{:f\}", ObjInternalVoltages.GetVoltageReference1Dot5());}}
\DoxyCodeLine{400 \textcolor{comment}{                            logger-\/>info("Voltage Reference 2.5: \{:f\}", ObjInternalVoltages.GetVoltageReference2Dot5());}}
\DoxyCodeLine{401 \textcolor{comment}{                            logger-\/>info("Voltage Reference 5.0: \{:f\}", ObjInternalVoltages.GetVoltageReference5Dot0());}}
\DoxyCodeLine{402 \textcolor{comment}{                            logger-\/>info("Voltage Reference 12: \{:f\}", ObjInternalVoltages.GetVoltageReference12());}}
\DoxyCodeLine{403 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{404 \textcolor{comment}{                        \}}}
\DoxyCodeLine{405 \textcolor{comment}{                        //VER ISSO DAQUI DPS (INTERNAL STATES)}}
\DoxyCodeLine{406 \textcolor{comment}{                        else if(frameRead.can\_id == 170)\{}}
\DoxyCodeLine{407 \textcolor{comment}{                            logger-\/>info("ID: INTERNAL\_VOLTAGES");}}
\DoxyCodeLine{408 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{409 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjInternalVoltages.GetByte7(), ObjInternalVoltages.GetByte6(), ObjInternalVoltages.GetByte5(), ObjInternalVoltages.GetByte4(), ObjVoltageInformation.GetByte3(), ObjInternalVoltages.GetByte2(), ObjInternalVoltages.GetByte1(), ObjInternalVoltages.GetByte0());}}
\DoxyCodeLine{410 \textcolor{comment}{                            logger-\/>info("Voltage Reference 1.5: \{:f\}", ObjInternalVoltages.GetVoltageReference1Dot5());}}
\DoxyCodeLine{411 \textcolor{comment}{                            logger-\/>info("Voltage Reference 2.5: \{:f\}", ObjInternalVoltages.GetVoltageReference2Dot5());}}
\DoxyCodeLine{412 \textcolor{comment}{                            logger-\/>info("Voltage Reference 5.0: \{:f\}", ObjInternalVoltages.GetVoltageReference5Dot0());}}
\DoxyCodeLine{413 \textcolor{comment}{                            logger-\/>info("Voltage Reference 12: \{:f\}", ObjInternalVoltages.GetVoltageReference12());}}
\DoxyCodeLine{414 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{415 \textcolor{comment}{                        \}}}
\DoxyCodeLine{416 \textcolor{comment}{                        //VER ISSO TBM (FAULT ERRORS)}}
\DoxyCodeLine{417 \textcolor{comment}{                        else if(frameRead.can\_id == 171)\{}}
\DoxyCodeLine{418 \textcolor{comment}{                            logger-\/>info("ID: INTERNAL\_VOLTAGES");}}
\DoxyCodeLine{419 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{420 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjInternalVoltages.GetByte7(), ObjInternalVoltages.GetByte6(), ObjInternalVoltages.GetByte5(), ObjInternalVoltages.GetByte4(), ObjVoltageInformation.GetByte3(), ObjInternalVoltages.GetByte2(), ObjInternalVoltages.GetByte1(), ObjInternalVoltages.GetByte0());}}
\DoxyCodeLine{421 \textcolor{comment}{                            logger-\/>info("Voltage Reference 1.5: \{:f\}", ObjInternalVoltages.GetVoltageReference1Dot5());}}
\DoxyCodeLine{422 \textcolor{comment}{                            logger-\/>info("Voltage Reference 2.5: \{:f\}", ObjInternalVoltages.GetVoltageReference2Dot5());}}
\DoxyCodeLine{423 \textcolor{comment}{                            logger-\/>info("Voltage Reference 5.0: \{:f\}", ObjInternalVoltages.GetVoltageReference5Dot0());}}
\DoxyCodeLine{424 \textcolor{comment}{                            logger-\/>info("Voltage Reference 12: \{:f\}", ObjInternalVoltages.GetVoltageReference12());}}
\DoxyCodeLine{425 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{426 \textcolor{comment}{                        \}}}
\DoxyCodeLine{427 \textcolor{comment}{}}
\DoxyCodeLine{428 \textcolor{comment}{}}
\DoxyCodeLine{429 \textcolor{comment}{                        else if(frameRead.can\_id == 172)\{}}
\DoxyCodeLine{430 \textcolor{comment}{                            logger-\/>info("ID: TORQUE\_TIMER\_INFO");}}
\DoxyCodeLine{431 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \%f \%f \%f \%f \%f \%f \%f \%f", ObjTorqueTimerInfo.GetByte7(), ObjTorqueTimerInfo.GetByte6(), ObjTorqueTimerInfo.GetByte5(), ObjTorqueTimerInfo.GetByte4(), ObjTorqueTimerInfo.GetByte3(), ObjTorqueTimerInfo.GetByte2(), ObjTorqueTimerInfo.GetByte1(), ObjTorqueTimerInfo.GetByte0());}}
\DoxyCodeLine{432 \textcolor{comment}{                            logger-\/>info("Commanded Torque: \%f", ObjTorqueTimerInfo.GetCommandedTorqueProcessed());}}
\DoxyCodeLine{433 \textcolor{comment}{                            logger-\/>info("Torque Feedback: \%f", ObjTorqueTimerInfo.GetTorqueFeedbackProcessed());}}
\DoxyCodeLine{434 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{435 \textcolor{comment}{                        \}}}
\DoxyCodeLine{436 \textcolor{comment}{}}
\DoxyCodeLine{437 \textcolor{comment}{                        else if(frameRead.can\_id == 171)\{ //TODO VER ISSO TBM (FAULT ERRORS)}}
\DoxyCodeLine{438 \textcolor{comment}{                            logger-\/>info("ID: MODULATIONINDEX\_FLUXWEAKENING");}}
\DoxyCodeLine{439 \textcolor{comment}{                            logger-\/>info("ID: \{:d\}", frameRead.can\_id);}}
\DoxyCodeLine{440 \textcolor{comment}{                            logger-\/>info("Bytes recebidos: \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\} \{:d\}", ObjInternalVoltages.GetByte7(), ObjInternalVoltages.GetByte6(), ObjInternalVoltages.GetByte5(), ObjInternalVoltages.GetByte4(), ObjVoltageInformation.GetByte3(), ObjInternalVoltages.GetByte2(), ObjInternalVoltages.GetByte1(), ObjInternalVoltages.GetByte0());}}
\DoxyCodeLine{441 \textcolor{comment}{                            logger-\/>info("Voltage Reference 1.5: \{:f\}", ObjInternalVoltages.GetVoltageReference1Dot5());}}
\DoxyCodeLine{442 \textcolor{comment}{                            logger-\/>info("Voltage Reference 2.5: \{:f\}", ObjInternalVoltages.GetVoltageReference2Dot5());}}
\DoxyCodeLine{443 \textcolor{comment}{                            logger-\/>info("Voltage Reference 5.0: \{:f\}", ObjInternalVoltages.GetVoltageReference5Dot0());}}
\DoxyCodeLine{444 \textcolor{comment}{                            logger-\/>info("Voltage Reference 12: \{:f\}", ObjInternalVoltages.GetVoltageReference12());}}
\DoxyCodeLine{445 \textcolor{comment}{                            logger-\/>info("-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/");}}
\DoxyCodeLine{446 \textcolor{comment}{                        \}}}
\DoxyCodeLine{447 \textcolor{comment}{                        */}}
\DoxyCodeLine{448 }
\DoxyCodeLine{449 }
\DoxyCodeLine{450                         std::string UDP\_Package\_StdString = UDP\_Package.dump();}
\DoxyCodeLine{451 \textcolor{preprocessor}{                        \#pragma omp critical (teste)}}
\DoxyCodeLine{452                         \{}
\DoxyCodeLine{453                         strcpy(MsgToClient, UDP\_Package\_StdString.c\_str());}
\DoxyCodeLine{454                         \textcolor{comment}{//printf("Mensagem aqui: \%s\(\backslash\)n", MsgToClient);}}
\DoxyCodeLine{455                         hasMessage = 1;}
\DoxyCodeLine{456                         \}}
\DoxyCodeLine{457                     \}}
\DoxyCodeLine{458 }
\DoxyCodeLine{459 }
\DoxyCodeLine{460             \}}
\DoxyCodeLine{461 }
\DoxyCodeLine{462 }
\DoxyCodeLine{463 \textcolor{preprocessor}{            \#pragma omp section //TASK WRITE MOTOR}}
\DoxyCodeLine{464             \{}
\DoxyCodeLine{465                 \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{466 }
\DoxyCodeLine{467 \textcolor{preprocessor}{                    \#pragma omp critical (writeFrame)}}
\DoxyCodeLine{468                     \{}
\DoxyCodeLine{469                     frameWrite = frameWrite\_Reserva;}
\DoxyCodeLine{470                     \}}
\DoxyCodeLine{471 }
\DoxyCodeLine{472 \textcolor{preprocessor}{                    \#pragma omp critical (mutex)}}
\DoxyCodeLine{473                     \{}
\DoxyCodeLine{474                     FlagWrite = write(SocketCan, \&frameWrite, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} can\_frame));}
\DoxyCodeLine{475 }
\DoxyCodeLine{476                     \}}
\DoxyCodeLine{477 }
\DoxyCodeLine{478 }
\DoxyCodeLine{479 }
\DoxyCodeLine{480                     \textcolor{comment}{//delay\_openmp(400);}}
\DoxyCodeLine{481                     \textcolor{comment}{//std::cout << std::chrono::duration\_cast<std::chrono::milliseconds> (std::chrono::system\_clock::now().time\_since\_epoch()).count() << std::endl;}}
\DoxyCodeLine{482                     std::this\_thread::sleep\_for (std::chrono::milliseconds(400));}
\DoxyCodeLine{483                 \}}
\DoxyCodeLine{484             \}}
\DoxyCodeLine{485 }
\DoxyCodeLine{486 \textcolor{preprocessor}{            \#pragma omp section // TASK READ INTERFACE}}
\DoxyCodeLine{487             \{}
\DoxyCodeLine{488                 std::string Mensagem;}
\DoxyCodeLine{489                 json UDP\_Receive;}
\DoxyCodeLine{490                 std::string RecID;}
\DoxyCodeLine{491                 std::string \textcolor{keyword}{const} Speed\_Literal             = \textcolor{stringliteral}{"speed\_id"};}
\DoxyCodeLine{492                 std::string \textcolor{keyword}{const} InverterEnable\_Literal    = \textcolor{stringliteral}{"enable\_id"};}
\DoxyCodeLine{493                 \textcolor{keywordtype}{int} lenUDP = 0;}
\DoxyCodeLine{494 }
\DoxyCodeLine{495 }
\DoxyCodeLine{496                 \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{497                     \textcolor{comment}{//printf("Chegando da interface..");}}
\DoxyCodeLine{498                     \textcolor{comment}{//TODO ver a necessidade de utilizar mutex no UDP}}
\DoxyCodeLine{499                     ioctl(sockfd, FIONREAD, \&lenUDP);}
\DoxyCodeLine{500                     \textcolor{keywordflow}{if}(lenUDP > 0 \&\& lenUDP < \textcolor{keyword}{sizeof}(buffer))\{}
\DoxyCodeLine{501                         n = recvfrom(sockfd, (\textcolor{keywordtype}{char} *)buffer, lenUDP,}
\DoxyCodeLine{502                             MSG\_WAITALL, ( \textcolor{keyword}{struct} sockaddr *) \&cliaddr,}
\DoxyCodeLine{503                             \&len);}
\DoxyCodeLine{504                         buffer[n] = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{505                         \textcolor{comment}{//TODO Rever a questão da adição do '\(\backslash\)0' (bitrix)}}
\DoxyCodeLine{506 }
\DoxyCodeLine{507                     \}}
\DoxyCodeLine{508                     \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{509                         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{510                     \}}
\DoxyCodeLine{511 }
\DoxyCodeLine{512                     printf(\textcolor{stringliteral}{"\%s\(\backslash\)n"}, buffer);}
\DoxyCodeLine{513                     Mensagem = buffer;}
\DoxyCodeLine{514 }
\DoxyCodeLine{515                     UDP\_Receive = json::parse(Mensagem);}
\DoxyCodeLine{516 }
\DoxyCodeLine{517                     \textcolor{comment}{//TorqueLimit = atof(buffer);}}
\DoxyCodeLine{518                     \textcolor{comment}{//printf("\%s \(\backslash\)n", buffer);}}
\DoxyCodeLine{519 }
\DoxyCodeLine{520                     \textcolor{keywordflow}{if}(UDP\_Receive.find(\textcolor{stringliteral}{"ID"}) != UDP\_Receive.end())\{}
\DoxyCodeLine{521 \textcolor{preprocessor}{                        \#pragma omp critical (writeFrame)}}
\DoxyCodeLine{522                         \{}
\DoxyCodeLine{523                         \textcolor{keywordflow}{if}(UDP\_Receive[\textcolor{stringliteral}{"ID"}] == \textcolor{stringliteral}{"speed\_id"})\{}
\DoxyCodeLine{524                             \textcolor{comment}{//ObjCommandMessage.Process\_SpeedSend(static\_cast<float*>(UDP\_Receive.at("speed\_id"))); //verificar isso depois}}
\DoxyCodeLine{525                             ObjCommandMessage.UpdateFrame(\&frameWrite\_Reserva);}
\DoxyCodeLine{526                         \}}
\DoxyCodeLine{527                         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(UDP\_Receive[\textcolor{stringliteral}{"ID"}] == \textcolor{stringliteral}{"enable\_id"})\{}
\DoxyCodeLine{528                             \textcolor{keywordflow}{if}(UDP\_Receive[\textcolor{stringliteral}{"Enable\_Command"}])\{}
\DoxyCodeLine{529                                 ObjCommandMessage.SetInverterEnable(1, \&frameWrite\_Reserva);}
\DoxyCodeLine{530                             \}}
\DoxyCodeLine{531                             \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{532                                 ObjCommandMessage.SetInverterEnable(0, \&frameWrite\_Reserva);}
\DoxyCodeLine{533                             \}}
\DoxyCodeLine{534 }
\DoxyCodeLine{535                             \textcolor{comment}{//TODO ponteiro pra frameWrite pro conceito de titular e reserva (2 framewrite); atomic boolean}}
\DoxyCodeLine{536                             \textcolor{comment}{//Esse ponteiro e flag vão ser utilizados nas duas threads}}
\DoxyCodeLine{537                             \textcolor{comment}{// flag atomic (flag e bool)}}
\DoxyCodeLine{538                         \}}
\DoxyCodeLine{539                         \}}
\DoxyCodeLine{540 }
\DoxyCodeLine{541                     \}}
\DoxyCodeLine{542 }
\DoxyCodeLine{543                 \}}
\DoxyCodeLine{544             \}}
\DoxyCodeLine{545 }
\DoxyCodeLine{546 \textcolor{preprocessor}{            \#pragma omp section // TASK WRITE INTERFACE}}
\DoxyCodeLine{547             \{}
\DoxyCodeLine{548                 \textcolor{keywordflow}{while}(1)\{}
\DoxyCodeLine{549 }
\DoxyCodeLine{550 \textcolor{preprocessor}{                    \#pragma omp critical (teste)}}
\DoxyCodeLine{551                     \{}
\DoxyCodeLine{552                     \textcolor{keywordflow}{if}(hasMessage)\{}
\DoxyCodeLine{553                         \textcolor{comment}{//printf("Mensagem: \%s\(\backslash\)n", MsgToClient);}}
\DoxyCodeLine{554                         sendto(sockfd, (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)MsgToClient, strlen(MsgToClient),}
\DoxyCodeLine{555                         MSG\_CONFIRM, (\textcolor{keyword}{const} \textcolor{keyword}{struct} sockaddr *) \&cliaddr,}
\DoxyCodeLine{556                         len);}
\DoxyCodeLine{557                         hasMessage = 0;}
\DoxyCodeLine{558 }
\DoxyCodeLine{559                     \}}
\DoxyCodeLine{560                     \}}
\DoxyCodeLine{561 }
\DoxyCodeLine{562                     \textcolor{comment}{//Envio do pacote UDP para o computador}}
\DoxyCodeLine{563 }
\DoxyCodeLine{564                     \textcolor{comment}{//UDP\_Package\_StdString = UDP\_Package.dump();}}
\DoxyCodeLine{565                     \textcolor{comment}{//std::string UDP\_Package\_StdString = UDP\_Package.dump();}}
\DoxyCodeLine{566 }
\DoxyCodeLine{567                     \textcolor{comment}{//DESCOMENTAR A LINHA DE BAIXO DEPOIS}}
\DoxyCodeLine{568                     \textcolor{comment}{//strcpy(MsgToClient, UDP\_Package\_StdString.c\_str());}}
\DoxyCodeLine{569                     \textcolor{comment}{//printf("Mensagem: \%s\(\backslash\)n", MsgToClient);}}
\DoxyCodeLine{570                     \textcolor{comment}{//DESCOMENTAR A LINHA DE BAIXO DEPOIS}}
\DoxyCodeLine{571 }
\DoxyCodeLine{572 }
\DoxyCodeLine{573 \textcolor{comment}{//                  printf("vamos testarrrrrr\(\backslash\)n");}}
\DoxyCodeLine{574 \textcolor{comment}{//                  scanf(" \%[\string^\(\backslash\)n]s", buffer3);}}
\DoxyCodeLine{575 \textcolor{comment}{//                  sendto(sockfd, (const char *)buffer3, strlen(buffer3),}}
\DoxyCodeLine{576 \textcolor{comment}{//                  MSG\_CONFIRM, (const struct sockaddr *) \&cliaddr,}}
\DoxyCodeLine{577 \textcolor{comment}{//                  len);}}
\DoxyCodeLine{578 \textcolor{comment}{//                  printf("vamos testarrrr\(\backslash\)n");}}
\DoxyCodeLine{579 }
\DoxyCodeLine{580                 \}}
\DoxyCodeLine{581             \}}
\DoxyCodeLine{582         \}}
\DoxyCodeLine{583     \}}
\DoxyCodeLine{584 }
\DoxyCodeLine{585     close(SocketCan);}
\DoxyCodeLine{586     \textcolor{comment}{//fclose(Arquivo);}}
\DoxyCodeLine{587     close(sockfd);}
\DoxyCodeLine{588 }
\DoxyCodeLine{589     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{590 \}}

\end{DoxyCode}
